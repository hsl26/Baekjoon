import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;
import java.util.StringTokenizer;

public class Solution {

  static int N, M;
  static int[][] board;

  static List<int[]> h;

  public static void main(String[] args) throws Exception {
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    StringTokenizer st;
    StringBuilder sb = new StringBuilder();

    int T = Integer.parseInt(br.readLine());

    for (int t = 1; t <= T; t++) {
      sb.append("#").append(t).append(" ");

      st = new StringTokenizer(br.readLine());
      N = Integer.parseInt(st.nextToken());
      M = Integer.parseInt(st.nextToken());;

      board = new int[N][N];
      h = new ArrayList<>();

      for (int r = 0; r < N; r++) {
        st = new StringTokenizer(br.readLine());
        for (int c = 0; c < N; c++) {
          board[r][c] = Integer.parseInt(st.nextToken());

          if (board[r][c] == 1)
            h.add(new int[] {r, c});
        }
      }

      int max = 0;

      for (int k = 1; k <= 2 * N; k++) {
        for (int r = 0; r < N; r++) {
          for (int c = 0; c < N; c++) {
            int cnt = 0;
            for (int[] arr : h) {
              if (Math.abs(arr[0] - r) + Math.abs(arr[1] - c) < k)
                cnt++;
            }

            int price = cnt * M - (2 * k * k - 2 * k + 1);

            if (price >= 0) {
              max = Math.max(max, cnt);
            }
          }
        }
      }

      sb.append(max).append("\n");

    }

    System.out.println(sb);
  }
}

// #1 5
// #2 4
// #3 24
// #4 48
// #5 3
// #6 65
// #7 22
// #8 22
// #9 78
// #10 400


// 10
// 8 3
// 0 0 0 0 0 1 0 0
// 0 1 0 1 0 0 0 1
// 0 0 0 0 0 0 0 0
// 0 0 0 1 0 1 0 0
// 0 0 1 1 0 0 0 0
// 0 0 0 0 0 0 0 0
// 0 0 0 0 1 0 1 0
// 1 0 0 0 0 0 0 0
// 7 7
// 0 0 0 1 0 0 0
// 0 0 0 0 0 0 0
// 0 0 0 0 0 0 0
// 1 0 0 0 0 0 1
// 0 0 0 0 0 0 0
// 0 0 0 0 0 0 0
// 0 0 0 1 0 0 0
// 10 5
// 0 0 0 0 0 0 0 0 0 0
// 0 0 1 0 0 0 0 0 1 1
// 0 0 0 0 0 1 0 0 1 0
// 0 0 0 0 0 1 1 0 0 0
// 0 1 0 0 0 0 0 0 0 1
// 1 0 0 1 1 1 0 0 0 0
// 0 1 0 1 0 1 0 0 0 1
// 0 0 0 0 0 0 1 0 0 1
// 0 0 1 1 0 0 0 0 0 0
// 0 0 0 1 0 0 1 1 0 0
// 15 4
// 0 0 0 1 0 0 0 0 0 0 0 0 0 1 1
// 1 0 0 0 0 1 0 0 0 1 0 0 0 0 0
// 1 0 1 1 0 1 0 0 1 0 0 0 0 0 1
// 0 0 1 0 1 0 0 0 0 1 0 0 0 0 0
// 0 0 0 0 0 1 1 1 0 0 0 0 0 0 0
// 0 1 1 0 0 0 0 0 0 0 1 1 0 1 0
// 0 0 0 0 0 1 0 1 0 0 1 1 1 1 1
// 0 0 1 0 0 0 0 0 0 0 0 0 0 0 1
// 0 0 0 0 0 0 0 1 0 0 1 0 1 1 0
// 0 1 0 0 0 1 0 1 1 0 0 0 0 0 0
// 1 1 1 0 0 0 0 0 1 0 0 0 0 1 0
// 1 0 1 0 0 1 0 1 0 0 1 0 0 0 0
// 0 0 0 0 0 0 1 1 1 0 1 0 0 0 0
// 0 0 0 0 0 0 1 0 0 0 1 0 0 1 1
// 0 0 0 0 1 0 0 0 0 0 0 1 0 0 0
// 15 3
// 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0
// 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0
// 1 0 0 0 0 0 1 0 0 0 0 0 1 0 0
// 0 0 0 0 1 0 0 0 0 1 1 0 0 0 1
// 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0
// 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1
// 0 0 1 0 0 0 0 0 1 0 1 0 0 0 0
// 0 0 0 0 1 0 0 0 0 1 0 0 0 0 0
// 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0
// 1 0 0 0 0 0 1 0 1 0 0 0 0 0 0
// 0 1 0 0 0 0 1 0 0 0 1 0 0 1 0
// 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0
// 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0
// 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
// 0 0 0 0 0 0 1 0 0 0 1 0 1 0 0
// 15 8
// 0 0 1 0 0 0 0 0 0 0 0 0 0 0 1
// 0 0 0 0 0 1 0 0 0 0 0 0 0 1 1
// 0 0 0 0 1 0 0 0 1 1 1 0 1 0 0
// 1 1 0 0 0 1 0 1 0 0 0 0 1 0 0
// 0 1 0 0 1 0 1 0 1 0 0 0 0 1 1
// 0 0 0 0 0 0 0 1 0 0 0 1 0 0 0
// 1 0 0 0 1 0 0 0 1 0 1 0 1 0 1
// 1 1 1 0 0 0 0 0 1 0 0 0 0 1 0
// 1 1 0 0 0 0 0 0 1 0 1 0 1 0 0
// 1 1 0 0 1 0 1 0 0 0 0 0 0 1 0
// 0 0 0 0 0 0 0 0 1 0 0 1 1 0 1
// 0 0 0 0 1 0 0 0 1 0 0 0 0 0 0
// 0 1 0 0 1 1 0 0 0 0 0 0 0 0 1
// 1 0 0 0 0 0 0 1 1 1 0 0 0 1 1
// 1 0 0 0 0 1 0 0 0 0 0 1 0 1 1
// 15 2
// 1 0 1 1 0 1 1 1 0 1 0 0 0 0 0
// 1 0 0 1 0 0 0 0 1 0 0 0 1 0 0
// 0 0 0 0 0 0 0 0 1 1 1 1 0 0 0
// 1 0 0 0 0 0 0 0 0 0 0 1 0 1 1
// 1 1 1 1 1 1 1 0 0 1 0 0 1 1 0
// 0 1 0 1 0 0 0 0 0 1 1 0 1 1 0
// 1 0 0 1 1 1 0 0 1 0 0 0 0 1 1
// 0 1 1 1 1 1 0 1 0 1 0 0 0 0 1
// 0 0 1 1 0 0 0 0 0 0 0 0 1 1 1
// 0 1 1 1 0 0 0 1 1 0 0 1 0 0 1
// 0 0 1 0 0 1 1 0 1 0 0 0 1 0 0
// 1 1 1 1 1 0 0 1 1 0 1 1 1 1 1
// 1 1 0 0 0 0 0 1 0 0 0 0 0 1 0
// 1 1 0 1 0 0 0 0 0 1 0 0 0 0 1
// 0 1 0 0 0 0 1 0 0 1 0 1 0 0 0
// 20 4
// 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
// 0 0 0 0 1 1 0 0 1 0 0 0 1 0 0 0 1 0 0 0
// 1 0 0 0 1 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0
// 0 0 0 0 0 0 1 0 0 0 0 1 0 0 0 0 0 0 0 0
// 0 0 0 1 1 0 0 0 1 0 0 0 0 0 1 0 0 1 1 1
// 0 0 0 0 0 0 0 1 0 0 0 0 0 1 1 0 0 0 0 1
// 0 0 0 0 0 1 1 0 0 1 0 1 0 0 0 0 0 0 0 0
// 0 0 1 0 0 0 0 0 1 0 0 0 0 0 0 1 0 0 0 1
// 0 1 0 0 0 1 0 1 1 1 0 0 0 0 0 0 0 0 1 0
// 0 0 0 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 1 0
// 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0
// 1 0 0 1 0 0 1 0 0 1 0 0 0 0 0 0 0 0 0 1
// 0 0 0 1 0 0 1 0 0 0 0 1 0 0 0 0 0 0 0 0
// 0 0 1 0 0 0 0 1 0 0 0 0 1 0 1 0 0 1 0 0
// 0 0 0 0 1 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0
// 0 0 0 1 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0
// 0 0 0 0 0 1 0 1 0 0 0 0 0 0 0 0 0 1 0 0
// 0 0 0 1 0 0 1 0 0 0 0 0 0 0 1 0 1 1 0 0
// 0 0 1 0 1 0 0 0 0 1 1 1 0 0 0 0 0 1 0 0
// 0 0 0 0 0 0 0 0 0 0 1 1 0 0 0 0 1 0 0 0
// 20 10
// 0 0 0 0 1 0 0 1 0 0 0 0 0 0 0 1 0 1 0 1
// 0 0 0 0 0 1 0 0 0 0 0 0 1 0 0 0 0 0 0 0
// 0 0 0 1 0 0 1 0 0 1 0 0 0 1 0 0 0 0 1 0
// 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 1 0 0
// 1 0 1 0 0 0 0 0 0 0 0 0 1 0 1 0 0 0 0 0
// 0 0 0 0 0 0 1 1 1 0 0 1 1 0 0 0 1 0 0 0
// 0 0 0 0 1 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0
// 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
// 0 1 0 0 0 0 0 0 1 0 1 0 0 0 0 1 0 0 0 0
// 1 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0
// 0 0 0 0 0 0 0 1 0 0 0 0 1 0 0 1 0 1 1 0
// 0 1 0 0 0 1 0 1 0 1 0 0 0 0 0 0 0 1 0 0
// 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0
// 1 0 0 0 0 0 0 0 0 0 0 0 1 1 0 0 0 0 0 0
// 0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0 0
// 0 0 1 0 0 0 0 0 1 1 1 0 0 1 0 0 0 0 0 0
// 0 0 0 0 0 0 1 0 1 0 1 0 1 0 0 0 0 0 0 0
// 0 0 1 0 1 1 1 1 1 1 0 0 0 1 0 0 0 1 0 1
// 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 1 0 0 0
// 0 1 0 0 1 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0
// 20 3
// 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
// 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
// 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
// 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
// 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
// 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
// 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
// 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
// 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
// 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
// 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
// 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
// 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
// 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
// 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
// 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
// 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
// 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
// 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
// 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1